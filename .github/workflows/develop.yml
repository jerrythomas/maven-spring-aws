name: Version Bump

on:
  push:
    branches:
      - develop

# jobs:
#   build:

#     runs-on: ubuntu-latest

#     steps:
#     - name: Checkout Latest Commit
#       uses: actions/checkout@v2

#     - name: Bump Version
#       id: bump
#       uses: nnichols/maven-version-bump-action@v3
#       with:
#         github-token: ${{ secrets.github_token }}

#     - name: Print Version
#       run: "echo 'New Version: ${{steps.bump.outputs.version}}'"
jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - name: Extract GAV
        id: pom-info
        uses: andreacomo/maven-gav-extractor@v1
      - name: Log GAV
        run: |
          echo ${{ steps.pom-info.outputs.group-id }}
          echo ${{ steps.pom-info.outputs.artifact-id }}
          echo ${{ steps.pom-info.outputs.version }}
        shell: bash
      - name: Validate semantic versionning
        uses: matdurand/conventional-version-bump-check@v1
        with:
          current-version: ${{ steps.pom-info.outputs.version }}
      # - name: Uses POM Version Bump
      #   uses: wlicamele-bw/pom-version-bump@v1.0
      #   id: bump
      #   with:
      #     setVersion: bump
      #     bumpVersion: patch
      #     bumpChangelog: true
      #     changelogDesc: ${{ github.event.pull_request.title }}